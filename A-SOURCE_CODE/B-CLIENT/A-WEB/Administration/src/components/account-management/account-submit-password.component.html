<div class="col-lg-6 col-lg-push-3">
    <form [formGroup]="accountPasswordSubmitBox"
          class="box box-default"
          (submit)="clickSubmitPassword()"
          novalidate>

        <!-- Overlay which is used for blocking box. -->
        <div class="overlay"
             *ngIf="isBusy">
            <i class="fa fa-refresh fa-spin"></i>
        </div>

        <div class="box-header">
            <span class="glyphicon glyphicon-search"></span>
            <span> Submit password</span>
        </div>

        <div class="box-body">
            <div class="row">
                <div class="col-lg-12">
                    <!-- Email address -->
                    <div class="form-group">
                        <label>Email address</label>
                        <input class="form-control"
                               placeholder="Email address"
                               formControlName="email"
                               [readonly]="isBusy"
                               autofocus="autofocus"
                               [(ngModel)]="accountPasswordSubmitModel.email"

                               required="required"
                               [minlength]="clientDataConstraintService.minLengthEmail"
                               [maxlength]="clientDataConstraintService.maxLengthEmail"
                               [pattern]="clientDataConstraintService.patternEmail">

                        <!-- Email validation summary -->
                        <div class="validation-summary"
                             *ngIf="!accountPasswordSubmitBox.controls.email.valid && accountPasswordSubmitBox.controls.email.dirty">
                            <ul>
                                <li *ngIf="accountPasswordSubmitBox.controls.email.hasError('required')">Email is
                                    required.
                                </li>
                                <li *ngIf="accountPasswordSubmitBox.controls.email.hasError('maxlength')">
                                    Email can only contains {{clientDataConstraintService.maxLengthEmail}} characters.
                                </li>
                                <li *ngIf="accountPasswordSubmitBox.controls.email.hasError('pattern')">
                                    Email format is invalid.
                                </li>
                            </ul>
                        </div>
                    </div>


                    <!-- Token -->
                    <div class="form-group">
                        <label>Token</label>
                        <input formControlName="token"
                               type="text"
                               class="form-control"
                               [(ngModel)]="accountPasswordSubmitModel.token"

                               required="required"
                               [maxlength]="32"
                               [pattern]="clientDataConstraintService.patternTokenCode"/>

                        <div class="validation-summary"
                             *ngIf="!accountPasswordSubmitBox.controls.token.valid && accountPasswordSubmitBox.controls.token.dirty">
                            <ul>
                                <li *ngIf="accountPasswordSubmitBox.controls.token.hasError('required')">
                                    Token is required
                                </li>
                                <li *ngIf="accountPasswordSubmitBox.controls.token.hasError('pattern')">
                                    Token format is invalid.
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- New password -->
                    <div class="form-group">
                        <label>New password</label>
                        <input formControlName="password"
                               [(ngModel)]="accountPasswordSubmitModel.newPassword"
                               type="password"
                               class="form-control"

                               required="required"
                               [pattern]="clientDataConstraintService.patternAccountPassword">

                        <!-- New password confirmation validation summary -->
                        <div class="validation-summary"
                             *ngIf="!accountPasswordSubmitBox.controls.password.valid && accountPasswordSubmitBox.controls.password.dirty">
                            <ul>
                                <li *ngIf="accountPasswordSubmitBox.controls.passwordConfirmation.hasError('required')">
                                    Password is required.
                                </li>
                                <li *ngIf="accountPasswordSubmitBox.controls.passwordConfirmation.hasError('pattern')">
                                    Password format is invalid.
                                </li>
                            </ul>
                        </div>

                    </div>

                    <!-- New password confirmation -->
                    <div class="form-group">
                        <label>Password confirmation</label>
                        <input formControlName="passwordConfirmation"
                               [(ngModel)]="accountPasswordSubmitModel.passwordConfirmation"
                               type="password"
                               class="form-control"

                               [pattern]="clientDataConstraintService.patternAccountPassword"
                               text-property-comparision="password"
                               text-property-comparision-mode="="/>
                    </div>

                    <!-- Password confirmation validation summary -->
                    <div class="validation-summary"
                         *ngIf="!accountPasswordSubmitBox.controls.passwordConfirmation.valid && accountPasswordSubmitBox.controls.passwordConfirmation.dirty">
                        <ul>
                            <li *ngIf="accountPasswordSubmitBox.controls.passwordConfirmation.hasError('textPropertyComparision')">
                                Passwords must match each other.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="box-footer text-center">
            <button type="submit"
                    class="btn btn-primary btn-flat"
                    [disabled]="!accountPasswordSubmitBox.valid">
                <span>Submit</span>
            </button>
        </div>
    </form>
</div>
