<!-- Main row -->
<div class="row">
    <div class="col-lg-12">

        <!-- Category information find box -->
        <category-find-box #categoryFindBox
                           [isLoading]="_isLoading"
                           [conditions]="_findCategoriesViewModel"
                           (search)="clickSearch()"></category-find-box>
    </div>
</div>

<!-- Create category button -->

<div class="row">
    <div class="col-lg-12">
        <div class="text-center">
            <button class="btn btn-default btn-flat btn-block"
                    (click)="initiateCategoryInfoModal.show()"
                    *ngIf="!_isLoading">
                <span class="fa fa-plus"></span>
                <span>Create category</span>
            </button>
        </div>
    </div>
</div>


<!-- Pagination section -->
<div class="row"
     *ngIf="(_categorySearchResult != null && _categorySearchResult.total > 0 && !_isLoading)">
    <div class="col-lg-12">
        <div class="text-center">
            <pagination [totalItems]="_categorySearchResult.total"
                        [itemsPerPage]="_findCategoriesViewModel.pagination.records"
                        [(ngModel)]="_findCategoriesViewModel.pagination.index"
                        [rotate]="_clientConfigurationService.ngPaginationSettings.rotate"
                        [firstText]="_clientConfigurationService.ngPaginationSettings.firstText"
                        [previousText]="_clientConfigurationService.ngPaginationSettings.previousText"
                        [nextText]="_clientConfigurationService.ngPaginationSettings.nextText"
                        [lastText]="_clientConfigurationService.ngPaginationSettings.lastText"
                        (pageChanged)="clickPageChange($event)"></pagination>
        </div>
    </div>
</div>

<!-- List of categories -->
<div class="row"
     *ngIf="(_categorySearchResult != null && _categorySearchResult.total > 0 && !_isLoading)">
    <div class="col-lg-12">
        <div class="box box-default">
            <!-- Loading overlay -->
            <div class="overlay"
                 *ngIf="_isLoading">
                <i class="fa fa-refresh fa-spin"></i>
            </div>

            <div class="box-body">
                <!-- List of categories -->
                <div class="col-lg-4" *ngFor="let category of _categorySearchResult.categories">
                    <category-detail [category]="category"
                                     (clickRemoveCategory)="clickRemoveCategory(category, deleteCategoryConfirmModal)"
                                     (clickChangeCategoryInfo)="clickChangeCategoryDetail(category, changeCategoryInfoModal)"></category-detail>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Pagination section -->
<div class="row"
     *ngIf="(_categorySearchResult != null && _categorySearchResult.total > 0 && !_isLoading)">
    <div class="col-lg-12">
        <div class="text-center">
            <pagination [totalItems]="_categorySearchResult.total"
                        [itemsPerPage]="_findCategoriesViewModel.pagination.records"
                        [(ngModel)]="_findCategoriesViewModel.pagination.index"
                        [rotate]="_clientConfigurationService.ngPaginationSettings.rotate"
                        [firstText]="_clientConfigurationService.ngPaginationSettings.firstText"
                        [previousText]="_clientConfigurationService.ngPaginationSettings.previousText"
                        [nextText]="_clientConfigurationService.ngPaginationSettings.nextText"
                        [lastText]="_clientConfigurationService.ngPaginationSettings.lastText"
                        (pageChanged)="clickPageChange($event)"></pagination>
        </div>
    </div>
</div>

<div bsModal
     #deleteCategoryConfirmModal="bs-modal"
     class="modal fade"
     tabindex="-1"
     role="dialog"
     aria-hidden="true"
     (onHide)="_selectCategoryDetail = null">

    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center">
                    <span *ngIf="_selectCategoryDetail != null">
                        Are you sure to delete <b class="text-danger">{{_selectCategoryDetail.name}}</b>  ?
                    </span>
                </div>
            </div>
            <div class="modal-footer">
                <div class="text-center">
                    <button class="btn btn-flat btn-danger"
                            (click)="clickConfirmDeleteCategory(deleteCategoryConfirmModal)">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Change category information modal dialog -->
<div bsModal
     #changeCategoryInfoModal="bs-modal"
     class="modal fade"
     tabindex="-1"
     role="dialog"
     aria-hidden="true"
     (onHide)="_selectCategoryDetail = null">

    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <span>Change category detail information</span>
            </div>
            <div class="modal-body"
                 *ngIf="_selectCategoryDetail != null">
                <div class="form-group">
                    <label>Category name</label>
                    <input class="form-control"
                           [(ngModel)]="_selectCategoryDetail.name"/>
                </div>
            </div>
            <div class="modal-footer">
                <div class="text-center">
                    <button class="btn btn-flat btn-primary"
                            (click)="clickConfirmChangeCategoryDetail(changeCategoryInfoModal)">
                        <span class="glyphicon glyphicon-check"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Initiate category information modal dialog -->
<div bsModal
     #initiateCategoryInfoModal="bs-modal"
     class="modal fade"
     tabindex="-1"
     role="dialog"
     aria-hidden="true">

    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <category-initiate-box (initiateCategory)="clickInitiateCategory($event)"
                                   [isLoading]="_isLoading"></category-initiate-box>
        </div>
    </div>
</div>